// Data from the provided JSON
const data = [
    ["1947-01-01", 243.1], ["1947-04-01", 246.3], ["1947-07-01", 250.1], ["1947-10-01", 260.3],
    ["1948-01-01", 266.2], ["1948-04-01", 272.9], ["1948-07-01", 279.5], ["1948-10-01", 280.7],
    ["1949-01-01", 275.4], ["1949-04-01", 271.7], ["1949-07-01", 273.3], ["1949-10-01", 271],
    ["1950-01-01", 281.2], ["1950-04-01", 290.7], ["1950-07-01", 308.5], ["1950-10-01", 320.3],
    ["1951-01-01", 336.4], ["1951-04-01", 344.5], ["1951-07-01", 351.8], ["1951-10-01", 356.6],
    ["1952-01-01", 360.2], ["1952-04-01", 361.4], ["1952-07-01", 368.1], ["1952-10-01", 381.2],
    ["1953-01-01", 388.5], ["1953-04-01", 392.3], ["1953-07-01", 391.7], ["1953-10-01", 386.5],
    ["1954-01-01", 385.9], ["1954-04-01", 386.7], ["1954-07-01", 391.6], ["1954-10-01", 400.3],
    ["1955-01-01", 413.8], ["1955-04-01", 422.2], ["1955-07-01", 430.9], ["1955-10-01", 437.8],
    ["1956-01-01", 440.5], ["1956-04-01", 446.8], ["1956-07-01", 452], ["1956-10-01", 461.3],
    ["1957-01-01", 470.6], ["1957-04-01", 472.8], ["1957-07-01", 480.3], ["1957-10-01", 475.7],
    ["1958-01-01", 468.4], ["1958-04-01", 472.8], ["1958-07-01", 486.7], ["1958-10-01", 500.4],
    ["1959-01-01", 511.1], ["1959-04-01", 524.2], ["1959-07-01", 525.2], ["1959-10-01", 529.3],
    ["1960-01-01", 543.3], ["1960-04-01", 542.7], ["1960-07-01", 546], ["1960-10-01", 541.1],
    ["1961-01-01", 545.9], ["1961-04-01", 557.4], ["1961-07-01", 568.2], ["1961-10-01", 581.6],
    ["1962-01-01", 595.2], ["1962-04-01", 602.6], ["1962-07-01", 609.6], ["1962-10-01", 613.1],
    ["1963-01-01", 622.7], ["1963-04-01", 631.8], ["1963-07-01", 645], ["1963-10-01", 654.8],
    ["1964-01-01", 671.1], ["1964-04-01", 680.8], ["1964-07-01", 692.8], ["1964-10-01", 698.4],
    ["1965-01-01", 719.2], ["1965-04-01", 732.4], ["1965-07-01", 750.2], ["1965-10-01", 773.1],
    ["1966-01-01", 797.3], ["1966-04-01", 807.2], ["1966-07-01", 820.8], ["1966-10-01", 834.9],
    ["1967-01-01", 846], ["1967-04-01", 851.1], ["1967-07-01", 866.6], ["1967-10-01", 883.2],
    ["1968-01-01", 911.1], ["1968-04-01", 936.3], ["1968-07-01", 952.3], ["1968-10-01", 970.1],
    ["1969-01-01", 995.4], ["1969-04-01", 1011.4], ["1969-07-01", 1032], ["1969-10-01", 1040.7],
    ["1970-01-01", 1053.5], ["1970-04-01", 1070.1], ["1970-07-01", 1088.5], ["1970-10-01", 1091.5],
    ["1971-01-01", 1137.8], ["1971-04-01", 1159.4], ["1971-07-01", 1180.3], ["1971-10-01", 1193.6],
    ["1972-01-01", 1233.8], ["1972-04-01", 1270.1], ["1972-07-01", 1293.8], ["1972-10-01", 1332],
    ["1973-01-01", 1380.7], ["1973-04-01", 1417.6], ["1973-07-01", 1436.8], ["1973-10-01", 1479.1],
    ["1974-01-01", 1494.7], ["1974-04-01", 1534.2], ["1974-07-01", 1563.4], ["1974-10-01", 1603],
    ["1975-01-01", 1619.6], ["1975-04-01", 1656.4], ["1975-07-01", 1713.8], ["1975-10-01", 1765.9],
    ["1976-01-01", 1824.5], ["1976-04-01", 1856.9], ["1976-07-01", 1890.5], ["1976-10-01", 1938.4],
    ["1977-01-01", 1992.5], ["1977-04-01", 2060.2], ["1977-07-01", 2122.4], ["1977-10-01", 2168.7],
    ["1978-01-01", 2208.7], ["1978-04-01", 2336.6], ["1978-07-01", 2398.9], ["1978-10-01", 2482.2],
    ["1979-01-01", 2531.6], ["1979-04-01", 2595.9], ["1979-07-01", 2670.4], ["1979-10-01", 2730.7],
    ["1980-01-01", 2796.5], ["1980-04-01", 2799.9], ["1980-07-01", 2860], ["1980-10-01", 2993.5],
    ["1981-01-01", 3131.8], ["1981-04-01", 3167.3], ["1981-07-01", 3261.2], ["1981-10-01", 3283.5],
    ["1982-01-01", 3273.8], ["1982-04-01", 3331.3], ["1982-07-01", 3367.1], ["1982-10-01", 3400.4],
    ["1983-01-01", 3434.7], ["1983-04-01", 3545.3], ["1983-07-01", 3632.7], ["1983-10-01", 3695.6],
    ["1984-01-01", 3881.6], ["1984-04-01", 4007.5], ["1984-07-01", 4094.8], ["1984-10-01", 4147.7],
    ["1985-01-01", 4224], ["1985-04-01", 4330.9], ["1985-07-01", 4390.8], ["1985-10-01", 4468.1],
    ["1986-01-01", 4559.7], ["1986-04-01", 4595.9], ["1986-07-01", 4673.8], ["1986-10-01", 4734.5],
    ["1987-01-01", 4821.5], ["1987-04-01", 4930.1], ["1987-07-01", 5011.5], ["1987-10-01", 5110.2],
    ["1988-01-01", 5207.7], ["1988-04-01", 5351.8], ["1988-07-01", 5486.8], ["1988-10-01", 5584.5],
    ["1989-01-01", 5677.8], ["1989-04-01", 5790.9], ["1989-07-01", 5849.3], ["1989-10-01", 5903.2],
    ["1990-01-01", 5997.8], ["1990-04-01", 6079.4], ["1990-07-01", 6150.6], ["1990-10-01", 6173.9],
    ["1991-01-01", 6172], ["1991-04-01", 6209.4], ["1991-07-01", 6275.4], ["1991-10-01", 6316.9],
    ["1992-01-01", 6388.8], ["1992-04-01", 6492.3], ["1992-07-01", 6612.5], ["1992-10-01", 6741.2],
    ["1993-01-01", 6860.9], ["1993-04-01", 6967.4], ["1993-07-01", 7059.5], ["1993-10-01", 7173.1],
    ["1994-01-01", 7285.2], ["1994-04-01", 7426.4], ["1994-07-01", 7540.6], ["1994-10-01", 7664.4],
    ["1995-01-01", 7781.5], ["1995-04-01", 7889.3], ["1995-07-01", 7992.6], ["1995-10-01", 8100.2],
    ["1996-01-01", 8211.4], ["1996-04-01", 8354.3], ["1996-07-01", 8479.2], ["1996-10-01", 8607.5],
    ["1997-01-01", 8750.5], ["1997-04-01", 8887], ["1997-07-01", 9024.6], ["1997-10-01", 9142.5],
    ["1998-01-01", 9295.9], ["1998-04-01", 9435.7], ["1998-07-01", 9581.8], ["1998-10-01", 9675.3],
    ["1999-01-01", 9827], ["1999-04-01", 9966.2], ["1999-07-01", 10103.8], ["1999-10-01", 10279.4],
    ["2000-01-01", 10475.9], ["2000-04-01", 10673.5], ["2000-07-01", 10853.3], ["2000-10-01", 11039.7],
    ["2001-01-01", 11170.8], ["2001-04-01", 11236.9], ["2001-07-01", 11355.3], ["2001-10-01", 11423],
    ["2002-01-01", 11504.9], ["2002-04-01", 11637.6], ["2002-07-01", 11731.4], ["2002-10-01", 11851.5],
    ["2003-01-01", 12075.9], ["2003-04-01", 12242.6], ["2003-07-01", 12423.3], ["2003-10-01", 12638.4],
    ["2004-01-01", 12890.8], ["2004-04-01", 13095.4], ["2004-07-01", 13371.3], ["2004-10-01", 13625.9],
    ["2005-01-01", 13861.5], ["2005-04-01", 14162.1], ["2005-07-01", 14435.9], ["2005-10-01", 14677.9],
    ["2006-01-01", 14966.4], ["2006-04-01", 15251.6], ["2006-07-01", 15487.3], ["2006-10-01", 15697.6],
    ["2007-01-01", 15986.8], ["2007-04-01", 16253.2], ["2007-07-01", 16483.5], ["2007-10-01", 16618.1],
    ["2008-01-01", 16684.3], ["2008-04-01", 16953.7], ["2008-07-01", 17058.2], ["2008-10-01", 16986.8],
    ["2009-01-01", 16575.9], ["2009-04-01", 16549.1], ["2009-07-01", 16739.5], ["2009-10-01", 16945.1],
    ["2010-01-01", 17004.5], ["2010-04-01", 17312.7], ["2010-07-01", 17485.4], ["2010-10-01", 17733.4],
    ["2011-01-01", 17914.6], ["2011-04-01", 18182.3], ["2011-07-01", 18336.5], ["2011-10-01", 18550.7],
    ["2012-01-01", 18656.5], ["2012-04-01", 18922.5], ["2012-07-01", 19116.4], ["2012-10-01", 19329.1],
    ["2013-01-01", 19458.9], ["2013-04-01", 19623.7], ["2013-07-01", 19781.6], ["2013-10-01", 19966.9],
    ["2014-01-01", 20138.7], ["2014-04-01", 20415], ["2014-07-01", 20592.9], ["2014-10-01", 20797.1],
    ["2015-01-01", 20970.7], ["2015-04-01", 21193.7], ["2015-07-01", 21375.8], ["2015-10-01", 21574.1],
    ["2016-01-01", 21839.5], ["2016-04-01", 22084.3], ["2016-07-01", 22343.8], ["2016-10-01", 22588.1],
    ["2017-01-01", 22906.5], ["2017-04-01", 23200.5], ["2017-07-01", 23481.1], ["2017-10-01", 23762.1],
    ["2018-01-01", 24020.1], ["2018-04-01", 24352.7], ["2018-07-01", 24620], ["2018-10-01", 24919.6],
    ["2019-01-01", 25147.2], ["2019-04-01", 25505.5], ["2019-07-01", 25752.8], ["2019-10-01", 25988.3],
    ["2020-01-01", 26190.0], ["2020-04-01", 25495.3], ["2020-07-01", 26742.4], ["2020-10-01", 27215.9],
    ["2021-01-01", 27474.8], ["2021-04-01", 28131.9], ["2021-07-01", 28521.0], ["2021-10-01", 29004.2],
    ["2022-01-01", 29235.2], ["2022-04-01", 29712.3], ["2022-07-01", 30224.4], ["2022-10-01", 30678.7],
    ["2023-01-01", 31177.8], ["2023-04-01", 31612.3], ["2023-07-01", 32068.1]
  ];
  
  // Set dimensions and margins of the graph
  const margin = { top: 60, right: 30, bottom: 60, left: 60 };
  const width = 1200 - margin.left - margin.right;
  const height = 600 - margin.top - margin.bottom;
  
  // Append the svg object to the body of the page
  const svg = d3.select("body")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);
  
  // Parse the date
  const parseTime = d3.timeParse("%Y-%m-%d");
  data.forEach(d => {
    d[0] = parseTime(d[0]);
  });
  
  // X axis: scale and draw
  const x = d3.scaleTime()
    .domain(d3.extent(data, d => d[0]))
    .range([0, width]);
  
  svg.append("g")
    .attr("transform", `translate(0, ${height})`)
    .call(d3.axisBottom(x).ticks(10));
  
  // Y axis: scale and draw
  const y = d3.scaleLinear()
    .domain([0, d3.max(data, d => d[1])])
    .range([height, 0]);
  
  svg.append("g")
    .call(d3.axisLeft(y));
  
  // Create bars
  svg.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
    .attr("x", d => x(d[0]))
    .attr("y", d => y(d[1]))
    .attr("width", width / data.length)
    .attr("height", d => height - y(d[1]))
    .attr("fill", "#69b3a2")
    .on("mouseover", function (event, d) {
      tooltip
        .transition()
        .duration(200)
        .style("opacity", .9);
      tooltip
        .html("Date: " + d3.timeFormat("%Y-%m-%d")(d[0]) + "<br> GDP: $" + d[1] + " Billion")
        .style("left", (event.pageX + 5) + "px")
        .style("top", (event.pageY - 28) + "px");
    })
    .on("mouseout", function (d) {
      tooltip.transition()
        .duration(500)
        .style("opacity", 0);
    });
  
  // Add X axis label
  svg.append("text")
    .attr("text-anchor", "end")
    .attr("x", width / 2 + margin.left)
    .attr("y", height + margin.top + 20)
    .text("Year");
  
  // Add Y axis label
  svg.append("text")
    .attr("text-anchor", "end")
    .attr("x", -height / 2 + margin.top)
    .attr("y", -margin.left + 20)
    .attr("transform", "rotate(-90)")
    .text("GDP in Billion $");
  
  // Add a title
  svg.append("text")
    .attr("x", width / 2)
    .attr("y", -margin.top / 2)
    .attr("text-anchor", "middle")
    .style("font-size", "24px")
    .style("text-decoration", "underline")
    .text("US GDP Over Time");
  
  // Add tooltip
  const tooltip = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);
  
  